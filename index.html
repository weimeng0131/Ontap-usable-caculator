<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ONTAP å®¹é‡è‡ªåŠ¨è®¡ç®—å·¥å…·</title>

<style>
body{
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","PingFang SC","Microsoft YaHei";
  margin:24px; background:#fff; color:#111;
}
.wrap{max-width:1100px;margin:auto;}
.topbar{display:flex;justify-content:space-between;align-items:center;margin-bottom:14px;}
.brand{font-size:18px;font-weight:800;}
.btn{padding:8px 14px;border:1px solid #ddd;border-radius:10px;background:#fff;cursor:pointer;}
.view{display:none;}
.view.active{display:block;}
.grid3{display:grid;grid-template-columns:repeat(3,1fr);gap:14px;}
.tile{border:1px solid #ddd;border-radius:14px;padding:16px;cursor:pointer;}
.tile h3{margin:0;font-size:16px;}
.tile p{margin:10px 0 0;font-size:13px;color:#555;}
.card{border:1px solid #ddd;border-radius:14px;padding:18px;}
select{padding:8px;border-radius:10px;border:1px solid #ccc;width:260px;}
.result{margin-top:14px;font-size:20px;font-weight:700;}
.note{margin-top:10px;font-size:12px;color:#666;}
</style>
</head>

<body>
<div class="wrap">

<div class="topbar">
  <div class="brand">ONTAP å®¹é‡è‡ªåŠ¨è®¡ç®—å·¥å…·</div>
  <button id="backBtn" class="btn" style="display:none;">â† è¿”å›</button>
</div>

<!-- é¦–é¡µ -->
<div id="home" class="view active">
  <div class="grid3">
    <div class="tile" onclick="show('obj')">
      <h3>å¯¹è±¡å­˜å‚¨å®¹é‡è®¡ç®—</h3>
      <p>èŠ‚ç‚¹å†… RAID + èŠ‚ç‚¹é—´ EC / å‰¯æœ¬</p>
    </div>
    <div class="tile" onclick="show('aff')">
      <h3>AFF å­˜å‚¨å®¹é‡è®¡ç®—</h3>
      <p>A ç³»åˆ— Â· RAID-DP Â· åˆ†æ®µæ‰£ç›˜è§„åˆ™</p>
    </div>
    <div class="tile" onclick="show('fas')">
      <h3>FAS å­˜å‚¨å®¹é‡è®¡ç®—</h3>
      <p>å ä½ï¼Œåç»­è¡¥å……</p>
    </div>
  </div>
</div>

<!-- ================= AFF ================= -->
<div id="aff" class="view">
  <div class="card">
    <h3>AFF A ç³»åˆ—å¯ç”¨å®¹é‡è®¡ç®—</h3>
    <p class="note">RAID-DPï½œ8ç›˜èµ·é…ï½œ2ç›˜é€’å¢ï½œç»“æœè¾“å‡º TB / TiB</p>

    <label>å‹å·</label><br>
    <select id="affModel"></select><br><br>

    <label>ç£ç›˜æ•°é‡</label><br>
    <select id="affDiskCount"></select><br><br>

    <label>å•ç›˜å®¹é‡</label><br>
    <select id="affDiskSize">
      <option value="1.92">1.92 TB</option>
      <option value="3.84">3.84 TB</option>
      <option value="7.68">7.68 TB</option>
      <option value="15.3">15.3 TB</option>
      <option value="30.7">30.7 TB</option>
    </select>

    <div class="result" id="affResult"></div>
    <div class="note" id="affDetail"></div>
  </div>
</div>

<!-- =============== å¯¹è±¡å­˜å‚¨ï¼ˆå ä½ï¼Œä¿ç•™ä½ ç°æœ‰é¡µé¢ï¼‰============== -->
<div id="obj" class="view">
  <div class="card">
    <p>ğŸ‘‰ è¿™é‡Œä¿æŒä½ ç°æœ‰çš„å¯¹è±¡å­˜å‚¨è®¡ç®—å™¨ä»£ç ï¼ˆæ— éœ€ä¿®æ”¹ï¼‰</p>
  </div>
</div>

<!-- =============== FAS å ä½ =============== -->
<div id="fas" class="view">
  <div class="card">
    <p>FAS è§„åˆ™å¾…è¡¥å……</p>
  </div>
</div>

</div>

<script>
/* ---------- é€šç”¨å¯¼èˆª ---------- */
const views=["home","obj","aff","fas"];
const backBtn=document.getElementById("backBtn");
function show(v){
  views.forEach(x=>document.getElementById(x).classList.remove("active"));
  document.getElementById(v).classList.add("active");
  backBtn.style.display=(v==="home")?"none":"inline-block";
}
backBtn.onclick=()=>show("home");

/* ---------- AFF è§„åˆ™ ---------- */
const modelMax={
  A20:48, A30:72, A50:120, A70:240, A90:240, A1K:240
};

function subtractDisks(n){
  if(n<=24) return 3;
  if(n<=48) return 5;
  if(n<=72) return 7;
  if(n<=96) return 10;
  if(n<=120) return 12;
  if(n<=144) return 16;
  if(n<=168) return 20;
  if(n<=192) return 22;
  if(n<=216) return 24;
  return 28;
}

const modelSel=document.getElementById("affModel");
const diskSel=document.getElementById("affDiskCount");
const sizeSel=document.getElementById("affDiskSize");
const res=document.getElementById("affResult");
const detail=document.getElementById("affDetail");

/* åˆå§‹åŒ–å‹å· */
Object.keys(modelMax).forEach(m=>modelSel.add(new Option(m,m)));
modelSel.value="A20";

function refreshDisks(){
  diskSel.innerHTML="";
  for(let i=8;i<=modelMax[modelSel.value];i+=2){
    diskSel.add(new Option(i+" å—",i));
  }
  diskSel.value=12;
}

function calcAff(){
  const N=+diskSel.value;
  const S=+sizeSel.value;
  const sub=subtractDisks(N);

  const usableTB=(N-sub)*S*0.95*0.91-0.33;
  const usableTiB=usableTB*0.91;

  res.innerHTML=`â‰ˆ ${usableTB.toFixed(2)} TB<br>â‰ˆ ${usableTiB.toFixed(2)} TiB`;
  detail.textContent=`(${N}-${sub})Ã—${S}Ã—0.95Ã—0.91 âˆ’ 0.33`;
}

modelSel.onchange=()=>{refreshDisks();calcAff();};
diskSel.onchange=calcAff;
sizeSel.onchange=calcAff;

refreshDisks(); calcAff();
</script>

</body>
</html>
