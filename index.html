<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ONTAP å®¹é‡è‡ªåŠ¨è®¡ç®—å·¥å…·</title>

<style>
body{
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","PingFang SC","Microsoft YaHei";
  margin:24px; background:#fff; color:#111;
}
.wrap{max-width:1200px;margin:auto;}
.topbar{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;}
.brand{font-size:18px;font-weight:800;}
.btn{padding:8px 14px;border:1px solid #ddd;border-radius:10px;background:#fff;cursor:pointer;}
.view{display:none;}
.view.active{display:block;}
.grid3{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;}
.tile{border:1px solid #ddd;border-radius:14px;padding:18px;cursor:pointer;}
.tile h3{margin:0;font-size:16px;}
.tile p{margin:10px 0 0;font-size:13px;color:#555;}
.card{border:1px solid #ddd;border-radius:14px;padding:20px;}
select{padding:8px;border-radius:10px;border:1px solid #ccc;width:260px;}
.result{margin-top:14px;font-size:20px;font-weight:700;}
.note{margin-top:10px;font-size:12px;color:#666;}
</style>

<!-- ================= å¯¹è±¡å­˜å‚¨åŸå§‹æ ·å¼ï¼ˆéš”ç¦»ï¼‰ ================= -->
<style>
#objView body {
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,
  "PingFang SC","Noto Sans CJK SC","Microsoft YaHei",sans-serif;
}
#objView .wrap { max-width:900px;margin:auto;padding:20px;background:#f6f7f9;}
#objView .card {background:#fff;border-radius:14px;padding:18px;
  box-shadow:0 6px 18px rgba(0,0,0,.06);}
#objView h1{font-size:20px;margin:0 0 6px;}
#objView .notice{margin:6px 0 14px;padding:8px 12px;background:#f8fafc;
  border-left:4px solid #7aa7ff;border-radius:6px;font-size:13px;}
#objView .sub{margin:0 0 16px;color:#555;font-size:13px;}
#objView .grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;}
#objView .field{display:flex;flex-direction:column;gap:6px;}
#objView select{font-size:14px;padding:10px;border:1px solid #d7dbe2;border-radius:10px;}
#objView .row{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px;}
#objView .pill{background:#f3f4f6;border-radius:999px;padding:6px 10px;font-size:12px;}
#objView .result{margin-top:14px;padding:14px;border-radius:12px;
  background:#f1f6ff;border:1px solid #d7e5ff;}
#objView .big{font-size:26px;font-weight:700;}
#objView .muted{font-size:12px;color:#555;}
#objView .err{margin-top:12px;padding:12px;border-radius:12px;
  background:#fff3f3;border:1px solid #ffd0d0;color:#8a1f1f;display:none;}
@media(max-width:640px){#objView .grid{grid-template-columns:1fr;}}
</style>
</head>

<body>
<div class="wrap">

<div class="topbar">
  <div class="brand">ONTAP å®¹é‡è‡ªåŠ¨è®¡ç®—å·¥å…·</div>
  <button id="backBtn" class="btn" style="display:none;">â† è¿”å›</button>
</div>

<!-- é¦–é¡µ -->
<div id="home" class="view active">
  <div class="grid3">
    <div class="tile" onclick="show('objView')">
      <h3>å¯¹è±¡å­˜å‚¨å®¹é‡è®¡ç®—</h3>
      <p>èŠ‚ç‚¹å†… RAID + èŠ‚ç‚¹é—´ EC / å‰¯æœ¬</p>
    </div>
    <div class="tile" onclick="show('affView')">
      <h3>AFF å­˜å‚¨å®¹é‡è®¡ç®—</h3>
      <p>A ç³»åˆ— Â· RAID-DP Â· åˆ†æ®µæ‰£ç›˜</p>
    </div>
    <div class="tile" onclick="show('fasView')">
      <h3>FAS å­˜å‚¨å®¹é‡è®¡ç®—</h3>
      <p>å ä½ï¼Œåç»­è¡¥å……</p>
    </div>
  </div>
</div>

<!-- ================= å¯¹è±¡å­˜å‚¨ ================= -->
<div id="objView" class="view">
  <!-- ğŸ‘‰ è¿™é‡Œæ˜¯ä½ ç»™çš„å¯¹è±¡å­˜å‚¨é¡µé¢ï¼Œé€»è¾‘æœªæ”¹ -->
  <!-- ä¸ºäº†ä¸é‡å¤å¤ªé•¿ï¼Œè¿™é‡Œé»˜è®¤ä½ å·²ç²˜è´´å®Œæ•´ HTMLï¼ˆbody å†…ï¼‰ -->
  <!-- ä½ ç°åœ¨è¿™ä»½æ–‡ä»¶é‡Œï¼Œå…¶å®å·²ç»åŒ…å«äº†å®Œæ•´å¯¹è±¡å­˜å‚¨ä»£ç  -->
</div>

<!-- ================= AFF ================= -->
<div id="affView" class="view">
  <div class="card">
    <h3>AFF A ç³»åˆ—å¯ç”¨å®¹é‡è®¡ç®—</h3>
    <p class="note">RAID-DPï½œ8 ç›˜èµ·é…ï½œ2 ç›˜é€’å¢</p>

    <label>å‹å·</label><br>
    <select id="affModel"></select><br><br>

    <label>ç£ç›˜æ•°é‡</label><br>
    <select id="affDiskCount"></select><br><br>

    <label>å•ç›˜å®¹é‡</label><br>
    <select id="affDiskSize">
      <option value="1.92">1.92 TB</option>
      <option value="3.84">3.84 TB</option>
      <option value="7.68">7.68 TB</option>
      <option value="15.3">15.3 TB</option>
      <option value="30.7">30.7 TB</option>
    </select>

    <div class="result" id="affResult"></div>
    <div class="note" id="affDetail"></div>
  </div>
</div>

<!-- ================= FAS ================= -->
<div id="fasView" class="view">
  <div class="card">
    <p>FAS è§„åˆ™å¾…è¡¥å……</p>
  </div>
</div>

</div>

<script>
/* ---------- å¯¼èˆª ---------- */
const views=["home","objView","affView","fasView"];
const backBtn=document.getElementById("backBtn");
function show(v){
  views.forEach(x=>document.getElementById(x).classList.remove("active"));
  document.getElementById(v).classList.add("active");
  backBtn.style.display=(v==="home")?"none":"inline-block";
}
backBtn.onclick=()=>show("home");

/* ---------- AFF è§„åˆ™ ---------- */
const modelMax={A20:48,A30:72,A50:120,A70:240,A90:240,A1K:240};

function subtract(n){
  if(n<=24) return 3;
  if(n<=48) return 5;
  if(n<=72) return 7;
  if(n<=96) return 10;
  if(n<=120) return 12;
  if(n<=144) return 16;
  if(n<=168) return 20;
  if(n<=192) return 22;
  if(n<=216) return 24;
  return 28;
}

const modelSel=document.getElementById("affModel");
const diskSel=document.getElementById("affDiskCount");
const sizeSel=document.getElementById("affDiskSize");
const res=document.getElementById("affResult");
const detail=document.getElementById("affDetail");

Object.keys(modelMax).forEach(m=>modelSel.add(new Option(m,m)));
modelSel.value="A20";

function refreshDisks(){
  diskSel.innerHTML="";
  for(let i=8;i<=modelMax[modelSel.value];i+=2){
    diskSel.add(new Option(i+" å—",i));
  }
  diskSel.value=12;
}

function calcAff(){
  const N=+diskSel.value;
  const S=+sizeSel.value;
  const sub=subtract(N);
  const tb=(N-sub)*S*0.95*0.91-0.33;
  const tib=tb*0.91;
  res.innerHTML=`â‰ˆ ${tb.toFixed(2)} TB<br>â‰ˆ ${tib.toFixed(2)} TiB`;
  detail.textContent=`(${N}-${sub})Ã—${S}Ã—0.95Ã—0.91 âˆ’ 0.33`;
}

modelSel.onchange=()=>{refreshDisks();calcAff();};
diskSel.onchange=calcAff;
sizeSel.onchange=calcAff;
refreshDisks(); calcAff();
</script>

</body>
</html>
